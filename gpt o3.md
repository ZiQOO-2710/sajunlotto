# 사주 기반 로또 번호 예측 앱, **기술적 실현 가능성**

법적‧윤리적 이슈를 제외하고 **“기술적으로 가능한가?”**만 살펴보면, 충분히 구현할 수 있는 범위입니다. 아래에서 핵심 기술 요소와 예상 난이도를 구체적으로 정리했습니다.

## 1. 데이터 수집·저장

- **로또 당첨 번호**  
  - 동행복권 사이트는 회차별 번호·보너스 번호·추첨일을 HTML로 제공하므로, Python의 BeautifulSoup나 Selenium으로 일 1회 크롤링 후 DB에 누적 저장하면 됩니다.  
  - 자료량: 2002년 1회차부터 현재까지 1,100회차 이상(6 × n개의 정수).

- **사주 입력값**  
  - 필드: 연(YYYY), 월(MM), 일(DD), 시간(24h), 이름, 성별.  
  - 프런트엔드(Flutter/React Native)에서 입력 → 백엔드 API(JSON)로 전송 → 암호화 저장(SQL 또는 NoSQL).

- **사주 해석 지식베이스**  
  - 만세력 계산용 오픈소스(예: lunarcalendar·ephermis)로 천간·지지, 오행, 십신 등 1차 산출.  
  - 추가 해석 규칙은 유튜브 영상 → 자막 추출 → NLP 파이프라인(BERT + 키워드 추출)로 **룰**이나 **가중치** 형태로 정제해 점진적 업데이트.

## 2. 번호 예측 알고리즘

1. **통계·머신러닝 기본 모델**  
   - 빈도 분석, 번호 간 상관관계, LSTM·GRU 같은 시계열 NN을 통해 ‘기본 추천 후보 셋(예: 30 개)’을 생성.

2. **사주 개인화 레이어**  
   - 사주 오행 밸런스나 십신 강약 → 특정 번호대(1-9 = 수/목/금 등) 가중치 부여.  
   - 최종 6개 번호는 `기본 후보 × 사주 가중치` 스코어를 정렬해 상위 값 추출.

3. **학습 파이프라인**  
   - 로또 새 회차 발표 시 ▶ DB 저장 ▶ 모델 재학습(스케줄러).  
   - 유튜브 새 영상 처리도 크론잡으로 주기 실행 → 사주 룰 DB에 반영.

## 3. 시스템 아키텍처

| 레이어 | 기술 스택 | 주요 역할 |
|-------|-----------|-----------|
| 모바일 클라이언트 | Flutter (Dart) | UI, 로컬 캐시, 푸시알림 |
| API 서버 | FastAPI (Python) | 사용자·사주·예측 REST 엔드포인트 |
| AI·배치 서버 | TensorFlow/Keras, PyTorch | 로또 예측 학습, 유튜브 NLP |
| DB | PostgreSQL(사주·사용자) + MongoDB(학습 로그) | 데이터 저장 |
| 크롤러 | Python + BeautifulSoup | 로또 번호·유튜브 자막 수집 |
| 배포 | AWS Lightsail 또는 EC2, Docker | CI/CD, 오토스케일 |

## 4. 예상 개발 일정(1명 기준)

- Week 1-2: 요구사항 상세화·DB/API 스키마 설계  
- Week 3-4: 로또 크롤러·만세력 모듈 완성  
- Week 5-6: 기본 ML 모델(LSTM) 학습·API 연동  
- Week 7-8: Flutter UI→API 통합, 사주 가중치 로직 탑재  
- Week 9: 테스트·푸시알림·앱 스토어 준비

총 2개월 안팎에 프로토타입 출시 가능.

## 5. 현실적 난이도 평가

- **쉬움**: 로또 크롤링, 만세력 계산, Flutter 기본 UI.  
- **중간**: 시계열 예측 모델 튜닝, 유튜브 자막 NLP로 ‘가중치 룰’ 자동화.  
- **어려움**: 사주-번호 매핑 로직의 성과 평가(정답 데이터 부재) → A/B 테스트로 “재미 요소”만 확인.

## 6. 유지·운영 포인트

- 주 1회 번호 업데이트만으로도 데이터량이 작아 서버 비용은 월 5-10달러 상당.  
- 유튜브 영상 파싱은 Google API 쿼터가 있어 하루 10,000 요청 내에서 처리 가능.  
- 모델 재학습 주기를 과도하게 늘리지 말 것(예: 월 1회) → 과적합 완화.

**결론**: 순수 **엔터테인먼트** 목적이라면, 현재 시중 오픈소스·클라우드 자원으로 충분히 개발 가능합니다. 가장 큰 도전은 “사주 해석을 번호에 어떻게 매끄럽게 반영해 사용자에게 ‘재미’를 줄 것인지” 설계하는 부분이지, 기술 자체는 큰 장벽이 없습니다.

[1] https://dhlottery.co.kr/gameInfo.do?method=gameMethod

# 사주 기반 로또 번호 예측 앱 - 상세 설계도  

아래 설계는 앞서 논의한 기술적 실현 가능성을 토대로 작성한 **프로덕션 수준**의 문서입니다. 법적‧윤리적 요소는 제외하고, **개발·운영 관점**에 집중했습니다.  

## 1. 프로젝트 개요  
- **프로젝트명**: SajuLotto (가칭)  
- **목표**:  
  - 동행복권 로또 당첨 데이터 + 머신러닝으로 기본 후보 번호 생성.  
  - 사용자가 입력한 사주(생년월일·시간·성별·이름)를 가중치로 반영해 개인화된 6개 번호 제시.  
  - 유튜브 사주팔자 영상의 자막‧설명을 NLP로 분석, 사주 해석 규칙을 지속 확장.  
- **플랫폼**: Android/iOS 동시 지원(Flutter) + Python FastAPI 백엔드.  
- **성공 지표**:  
  - DAU 1,000명 달성.  
  - 주간 예측 요청 성공률 99.5%(서버 장애 기준).  

## 2. 핵심 기능 요구사항  

| 카테고리 | 기능 | 비고 |
|----|----|----|
| 사용자 | ① 회원 가입(이메일·SNS) ② 사주 입력/수정(연·월·일·시간·이름·성별) | 입력 검증·AES256 저장 |
| 사주 분석 | ① 만세력 계산(천간·지지·오행·십신) ② 유튜브 자막 학습 → 사주 룰 DB 업데이트 | lunarcalendar 라이브러리 + BERT |
| 로또 데이터 | ① 동행복권 크롤링(회차·번호·보너스·추첨일) ② 주기 스케줄러(토 21:00 이후) | BeautifulSoup + Requests |
| 예측 엔진 | ① 기본 후보 생성(LSTM) ② 사주 가중치 적용(오행 매핑) ③ 최종 6+1 번호 반환 | TensorFlow/Keras |
| UI/UX | ① 홈(최근 회차·예측 버튼) ② 사주 입력 폼 ③ 결과 화면(컬러 볼) ④ 설정·알림 | 모든 화면에 “재미용” 배너 |
| 알림 | ① 추첨일 오전 ‘번호 확인’ 푸시 ② 모델 업데이트 완료 알림 | Firebase Cloud Messaging |
| 로그·통계 | ① 예측 호출 로그 ② 사용자 수·세션 길이 대시보드 | Grafana + Prometheus |

## 3. 시스템 아키텍처  

```
┌─────────────────────┐        ┌──────────────────┐
│   Flutter Client    │◀──────▶│   FastAPI Gate   │
└─────────▲───────────┘  HTTPS  └────────▲─────────┘
          │                              │
          │REST/JSON                     │
┌─────────┴───────────┐        ┌─────────┴─────────┐
│  Prediction Service │◀──────▶│   Saju Service   │
│ (TensorFlow Serving)│ gRPC    └────────▲─────────┘
└─────────▲───────────┘                 │
          │Kafka                        │PostgreSQL
┌─────────┴───────────┐        ┌────────┴─────────┐
│  Lotto Crawler      │        │ YouTube NLP Job  │
└─────────────────────┘        └──────────────────┘
```

### 선택 스택  
- **클라이언트**: Flutter 3.x + Riverpod 상태관리.  
- **API**: FastAPI(Uvicorn), JWT 인증.  
- **ML 서빙**: TensorFlow Serving + Docker.  
- **DB**:  
  - PostgreSQL — 사용자·사주·로그.  
  - MongoDB — YouTube 자막 원본‧추출 키워드.  
- **메시지 브로커**: Kafka(비동기 모델 재학습 트리거).  
- **인프라**: AWS EC2(웹) + S3(정적 자산) + RDS(PostgreSQL).  
- **CI/CD**: GitHub Actions → Docker Hub → AWS ECS 배포.  

## 4. 데이터 설계  

### 4.1 테이블 스키마(요약)  
- `users(id, email, oauth_type, created_at)`  
- `saju_profiles(user_id FK, birth_ymdh, name, gender, gapja_json, oheng_score, updated_at)`  
- `lotto_draws(draw_no PK, draw_date, n1‒n6, bonus)`  
- `predictions(id PK, user_id FK, draw_no, numbers_json, created_at)`  
- `youtube_rules(id, keyword, weight, updated_at)`  

### 4.2 사주 오행 → 로또 번호대 매핑  
| 오행 | 번호 범위 | 기본 가중치 |
|---|---|---|
| 목 | 1-9 | 1.2 |
| 화 | 10-19 | 1.2 |
| 토 | 20-29 | 1.1 |
| 금 | 30-39 | 1.2 |
| 수 | 40-45 | 1.1 |

*유튜브 학습 결과에 따라 `weight` 실시간 조정.*

## 5. 알고리즘 파이프라인  

1. **데이터 준비**  
   - `lotto_draws` → 회차별 원-핫 벡터 생성(46차원).  
2. **기본 예측 모델**  
   - LSTM 2-layer(64→32 units), last timestep sigmoid → 후보 확률 벡터.  
3. **사주 가중치 적용**  
   - 사용자별 오행 비율 계산 → 각 범위 확률 × 가중치.  
4. **후보 추출**  
   - 확률 상위 15개 → 무작위 Sampling(Softmax Temperature 0.7) → 6개 번호 + 보너스 1개.  
5. **모델 재학습**  
   - 새 회차 추가시 Kafka 이벤트 → nightly Cron 재학습 → A/B 버전관리.  

## 6. 개발 로드맵(2명 팀 기준)  

| Sprint(2주) | 목표 |
|----|----|
| 1 | 요구사항 확정, DB·API 구조 설계 |
| 2 | 로또 크롤러·DB 적재, Flutter 로그인·사주 폼 |
| 3 | 만세력 모듈·오행 계산, 기본 LSTM 학습 |
| 4 | 예측 API 완성, 사주 가중치 레이어 결합 |
| 5 | 유튜브 자막 파서 + BERT 키워드 추출 PoC |
| 6 | UI 시각화, 푸시알림, 테스트·버그 픽스 |
| 7 | AWS 배포, 모니터링, 스토어 심사 준비 |

총 14주(3.5개월) 예상 — 인력·리소스에 따라 단축 가능.  

## 7. 운영·유지보수 포인트  

- **성능**: 예측 API 목표 지연 300ms 이하. 모델 서빙용 GPU 필요 없음(CPU m5.large).  
- **비용**: AWS 월 70달러 내외(트래픽 소규모 가정).  
- **데이터 쿼터**: YouTube Data API 일 10,000unit 제한 → 하루 500영상 자막 파싱 가능.  
- **보안**: 모든 PII 암호화 저장, 로깅 시 식별 정보 마스킹.  
- **확장**: 트래픽 증가 시 ECS 태스크 자동 스케일링, RDS read replica.  

## 8. 위험 요소 & 대응  

| 위험 | 영향 | 대응 |
|----|----|----|
| 유튜브 API 변경·쿼터 소진 | 사주 룰 업데이트 지연 | 자체 크롤링→auto-subtitle 추출 대체 |
| 모델 과적합·무작위성 부족 | 재미 감소 | Temperature·탑-p 샘플링 값 주기 조정 |
| PII 유출 | 사용자 신뢰 하락 | KISA 가이드 준수, 정기 침투 테스트 |

**요약**: 현재 공개 데이터·오픈소스만으로 **완전 자동화된 사주+로또 예측 앱**을 구축할 수 있습니다. 가장 중요한 차별화 포인트는 “사주 해석을 수치화해 번호 확률에 반영”하는 가중치 설계이며, 이는 유튜브 NLP 학습으로 꾸준히 개선하도록 구조화했습니다.